<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>ZK Yellowpages</title>
</head>

<body>
    <h1>A Privacy-Preserving Directory. Discover your network, privately.</h1>

    <!-- Form to register an interest -->
    <h2>Register Your Interest</h2>
    <form id="registerForm">
        <label> Name (or Alias):
            <input type="text" id="name" required />
        </label><br />
        <label> Interest:
            <input type="text" id="interest" required />
        </label><br />
        <button type="submit">Submit</button>
    </form>

    <!-- Form to search for an interest match -->
    <h2>Find a Matching Interest</h2>
    <form id="searchForm">
        <label> Interest to search:
            <input type="text" id="searchInterest" required />
        </label>
        <button type="submit">Search</button>
    </form>

    <!-- display results -->
    <div id="results"></div>

    <script>
        // JavaScript to handle form submissions
        const registerForm = document.getElementById('registerForm');
        const searchForm = document.getElementById('searchForm');
        const resultsDiv = document.getElementById('results');

        registerForm.onsubmit = async function (e) {
            e.preventDefault();
            resultsDiv.textContent = "";  // clear previous results
            const name = document.getElementById('name').value;
            const interest = document.getElementById('interest').value;
            // TODO:
            // 1. Compute interest_hash = hash(interest)
            // 2. Generate Noir ZK proof that user has this interest
            // 3. Store profile (name + interest_hash) via Iroh
            // simulate and inform the user:
            alert(`Hello ${name}! We would generate a proof for "${interest}" and store it in the directory.`);
            // (Could call an API here to do the actual steps on the server/backend)
        };

        searchForm.onsubmit = async function (e) {
            e.preventDefault();
            resultsDiv.textContent = "";
            const interestQuery = document.getElementById('searchInterest').value;
            // TODO:
            // 1. Compute hash = hash(interestQuery)
            // 2. Query Iroh for data by that hash
            // 3. Verify any proof from the data (Noir verify)
            // 4. Return matching profiles
            // Simulate by fetching a static file or using a placeholder:
            // assuming interestQuery "music" returns Alice.
            if (interestQuery.toLowerCase() === "music") {
                resultsDiv.textContent = "Match found! Alice is interested in ðŸŽµ music.";
            } else {
                resultsDiv.textContent = "No matches found for " + interestQuery;
            }
        };
    </script>
</body>

</html>